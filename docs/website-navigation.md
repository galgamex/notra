# 网址导航站系统

本文档介绍如何在 Notra 项目中使用新增的网址导航站系统。

## 数据库结构

### 核心模型

1. **WebsiteCategory** - 网站分类

   - 支持分层结构（父子分类）
   - 包含图标、颜色、排序等属性

2. **Website** - 网站信息

   - 基本信息：名称、URL、描述、Logo
   - 状态管理：待审核、已批准、已拒绝
   - 推荐和精选标记
   - 点击统计

3. **WebsiteTagEntity** - 网站标签

   - 用于更细粒度的分类
   - 支持颜色标识

4. **WebsiteClick** - 点击记录
   - 记录用户点击行为
   - 包含IP、用户代理等信息

## API 接口

### 网站管理

- `GET /api/website` - 获取网站列表
- `POST /api/website` - 创建网站（需要认证）
- `GET /api/website/[id]` - 获取单个网站详情
- `PUT /api/website/[id]` - 更新网站信息（需要权限）
- `DELETE /api/website/[id]` - 删除网站（需要权限）
- `POST /api/website/[id]/review` - 审核网站（管理员）
- `POST /api/website/submit` - 公开提交网站

### 分类管理

- `GET /api/website/categories` - 获取分类列表
- `POST /api/website/categories` - 创建分类（管理员）

### 标签管理

- `GET /api/website/tags` - 获取标签列表
- `POST /api/website/tags` - 创建标签（管理员）

### 统计和特殊功能

- `GET /api/website/stats` - 获取统计信息（管理员）
- `POST /api/website/clicks` - 记录点击
- `GET /api/website/clicks` - 获取点击记录（管理员）
- `GET /api/website/popular` - 获取热门网站
- `GET /api/website/recent` - 获取最新网站
- `GET /api/website/search` - 搜索建议

## 初始化数据

### 运行初始化脚本

```bash
# 安装依赖
pnpm install

# 生成 Prisma 客户端
pnpm db:generate

# 运行数据库迁移
pnpm db:migrate

# 初始化网址导航站数据
pnpm db:init-website
```

### 默认数据

初始化脚本会创建：

**默认分类：**

- 搜索引擎 🔍
- 社交媒体 👥
- 开发工具 ⚡
- 设计资源 🎨
- 学习教育 📚
- 娱乐休闲 🎮
- 新闻资讯 📰
- 购物电商 🛒
- 工具软件 🔧
- 其他 📂

**默认标签：**

- 免费、付费、开源
- 中文、英文
- 移动端、API、云服务
- AI、热门

**示例网站：**

- Google、百度（搜索引擎）
- GitHub（开发工具）
- Twitter（社交媒体）

## 权限系统

### 用户角色

- **游客**：浏览网站、提交网站
- **用户**：浏览网站、提交网站、管理自己提交的网站
- **管理员**：完整的管理权限

### 权限控制

1. **网站提交**：所有用户都可以提交，但需要审核
2. **网站编辑**：只有提交者和管理员可以编辑
3. **网站审核**：只有管理员可以审核
4. **分类/标签管理**：只有管理员可以管理
5. **统计查看**：只有管理员可以查看

## 状态管理

### 网站状态

- `PENDING` - 待审核（默认状态）
- `APPROVED` - 已批准（公开显示）
- `REJECTED` - 已拒绝（不显示）

### 审核流程

1. 用户提交网站 → `PENDING`
2. 管理员审核 → `APPROVED` 或 `REJECTED`
3. 已批准的网站在前台显示

## 特色功能

### 推荐和精选

- `isRecommend` - 推荐网站（在推荐区域显示）
- `isFeatured` - 精选网站（在精选区域显示）

### 点击统计

- 自动记录用户点击行为
- 支持热门网站排序
- 提供详细的访问统计

### 搜索功能

- 支持网站名称和描述搜索
- 提供搜索建议
- 支持按分类和标签过滤

## 扩展建议

### 前端页面

建议创建以下页面：

1. **导航首页** (`/website`) - 展示所有网站
2. **分类页面** (`/website/category/[slug]`) - 按分类浏览
3. **标签页面** (`/website/tag/[slug]`) - 按标签浏览
4. **网站详情** (`/website/[id]`) - 单个网站详情
5. **提交页面** (`/website/submit`) - 用户提交网站
6. **管理后台** (`/admin/website`) - 管理员管理界面

### 功能增强

1. **网站截图**：自动生成网站预览图
2. **收藏功能**：用户收藏喜欢的网站
3. **评分系统**：用户对网站进行评分
4. **RSS订阅**：订阅新增网站
5. **API文档**：提供完整的API文档
6. **批量导入**：支持批量导入网站数据

## 注意事项

1. **URL验证**：确保提交的URL格式正确且可访问
2. **重复检查**：避免重复提交相同的网站
3. **内容审核**：建立完善的内容审核机制
4. **性能优化**：对于大量数据，考虑分页和缓存
5. **SEO优化**：为网站页面添加适当的SEO标签
